package com.techlabs.test;

import java.util.Scanner;

import com.techlabs.model.AccounType;
import com.techlabs.model.Account;

public class AccountTest {
	
	public static void main(String args[]) {
	
		Scanner scanner = new Scanner(System.in);
		long accNum;
//		BankAccountApp.generateRandomAccountNumber()
		boolean isExit = false;
		boolean foundAccount;
		double maxAmount =0;
		Account[] bankAccount = null;
		while(!isExit) {
			System.out.println("--------------Bank Menu------------");
			System.out.println("1. Create Account \n 2.Debit Amount \n 3.Credit Amount \n 4.Get Maximum Amount \n 5.Display Details \n 6.Exit ");
			
			System.err.println("Enter option to choose: ");
			int option = scanner.nextInt();
			
			switch(option) {
			case 1: 
				System.out.println("Enter number of account to be created: ");
				int numberOfAccount = scanner.nextInt();
				bankAccount = new Account[numberOfAccount];
				for(int i=0; i<bankAccount.length; i++) {
					
					long accountNumber = Account.randomAccountNumber();
					System.out.print("Your Account Number generated by Executive: "+accountNumber);
					System.out.println("Enter your name: ");
					String accountName = scanner.next();
					System.out.println("Enter your Balance: ");
					double accountBalance = scanner.nextDouble();
					System.out.println("Enter your Type in numbers: Default) Salary, 1) Savings, 2) Current, 3) Business");
					AccounType accountType;
					
					int accountOption = scanner.nextInt();
					switch(accountOption) {
					case 1: 
						accountType = AccounType.savings;
						break;
					case 2: 
						accountType = AccounType.current;
						break;
					case 3:
						accountType = AccounType.buisness;
						break;
					default : 
						 accountType =AccounType.savings;
						 break;
					}
					
					bankAccount[i] = new Account(accountNumber, accountName, accountBalance, accountType);
				}
				
				System.out.println("_Creaed Account_");
				for(Account bank : bankAccount) {
					System.out.println(bank); // object in array to return by to string 
				}
				break;
				
			case 2: 
				  
				System.out.println("Enter your bank number: ");
				accNum = scanner.nextLong();
//				foundAccount = false;
				if(bankAccount != null) {	
				for(Account bank : bankAccount) {
					if(Account.randomAccountNumber() == accNum) {
						System.out.println("Enter amount to be debited: ");
						double amount = scanner.nextDouble();
						bank.debit(amount); //bank instead of bankAccount since bank is iterating in bankAcount
//						foundAccount =true;
						break;
					}
				}
				}
				
			case 3: 
				System.out.println("Enter your bank number: ");
				accNum = scanner.nextLong();
//				foundAccount = false;
				if(bankAccount != null) {
				for(Account bank : bankAccount) {
					if(Account.randomAccountNumber() == accNum) {
						System.out.println("Enter amount to be credited: ");
						double amount = scanner.nextDouble();
						bank.credit(amount);
//						foundAccount = true;
			break;
					}
				}
				}
			case 4: 
				System.out.println("Calculating maximum amount : ");
				if(bankAccount !=null) {
					for(Account bank: bankAccount) {
						maxAmount = Math.max(bank.getAccountBalance(), maxAmount);
					}
				} else {
					System.out.println("No accounts ");
				}
				break;
				
			case 5: 
				System.out.println();
				break;
			case 6: 
				System.out.println("thank you using your app");
				isExit = true;
				break;
			default: 
				System.out.println("Enter valid Option");
			} //switch loop
		} // while
		
		scanner.close();
	}
}
